<!DOCTYPE html>
<html lang=\"tr\">
<head>
<meta charset=\"utf-8\">
<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover\">
<title>STL GÃ¶rÃ¼ntÃ¼leyici v2 â€” Mobil Uyumlu</title>
<style>
:root{--bg:#0c0f14;--fg:#ecf2ff;--muted:#93a1b5;--panel:rgba(18,22,29,.9);--accent:#5aa3ff;}
html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
#toolbar{position:fixed;left:0;right:0;bottom:0;display:flex;gap:.5rem;align-items:center;justify-content:center;padding:.6rem env(safe-area-inset-right) calc(.7rem + env(safe-area-inset-bottom)) env(safe-area-inset-left);background:var(--panel);backdrop-filter:blur(8px);border-top:1px solid rgba(255,255,255,.07);z-index:10}
.btn{appearance:none;border:1px solid rgba(255,255,255,.12);background:linear-gradient(180deg,#151a22,#0f141c);color:var(--fg);padding:.75rem .95rem;border-radius:.9rem;font-size:14px;font-weight:700;display:flex;align-items:center;gap:.45rem;box-shadow:0 1px 0 rgba(255,255,255,.05) inset, 0 6px 18px rgba(0,0,0,.32);cursor:pointer}
#file{display:none}#canvas{position:absolute;inset:0}
#toast{position:fixed;left:50%;top:12px;transform:translateX(-50%);background:var(--panel);border:1px solid rgba(255,255,255,.1);padding:.45rem .75rem;border-radius:.65rem;color:var(--muted);font-size:13px;z-index:11;backdrop-filter:blur(8px);max-width:92vw;text-align:center}
#drop{position:absolute;inset:0;border:2px dashed rgba(255,255,255,.12);border-radius:16px;margin:14px;display:none;align-items:center;justify-content:center;color:var(--muted);z-index:7;pointer-events:none}
#fabOpen{position:fixed;right:14px;bottom:calc(72px + env(safe-area-inset-bottom));background:var(--accent);color:#02122b;border:none;border-radius:999px;padding:.9rem 1.1rem;font-weight:800;box-shadow:0 10px 24px rgba(0,0,0,.35);z-index:10;cursor:pointer}
</style>
</head>
<body>
<div id=\"toast\">ðŸ“‚ STL dosyanÄ± aÃ§mak iÃ§in alttan <b>STL AÃ§</b> veya saÄŸ alttan <b>AÃ§</b> dÃ¼ÄŸmesini kullan.</div>
<div id=\"drop\">BÄ±rakÄ±nâ€¦</div>
<canvas id=\"canvas\"></canvas>
<div id=\"toolbar\">
  <label class=\"btn\" for=\"file\">ðŸ“‚ STL AÃ§</label>
  <button id=\"reset\" class=\"btn\">ðŸ”„ SÄ±fÄ±rla</button>
  <button id=\"wire\" class=\"btn\">ðŸ§µ Tel Kafes</button>
  <button id=\"theme\" class=\"btn\">ðŸŒ— Arka Plan</button>
  <button id=\"grid\" class=\"btn\"># Izgara</button>
</div>
<button id=\"fabOpen\">AÃ§</button>
<input id=\"file\" type=\"file\">
<script src=\"https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.min.js\"></script>
<script src=\"https://cdn.jsdelivr.net/npm/three@0.161.0/examples/js/controls/OrbitControls.js\"></script>
<script src=\"https://cdn.jsdelivr.net/npm/three@0.161.0/examples/js/loaders/STLLoader.js\"></script>
<script src=\"https://cdn.jsdelivr.net/npm/three@0.161.0/examples/js/utils/BufferGeometryUtils.js\"></script>
<script>
(function(){
  const canvas=document.getElementById('canvas'); const toast=document.getElementById('toast'); const drop=document.getElementById('drop'); const fileInput=document.getElementById('file');
  document.getElementById('fabOpen').addEventListener('click',()=>fileInput.click());
  function showToast(t){ toast.innerHTML=t; toast.style.opacity=1; clearTimeout(showToast._t); showToast._t=setTimeout(()=>toast.style.opacity=0,5000); }
  const scene=new THREE.Scene(); let dark=true; scene.background=new THREE.Color(0x0c0f14);
  const camera=new THREE.PerspectiveCamera(60,1,0.1,20000); camera.position.set(0,0,180);
  const renderer=new THREE.WebGLRenderer({canvas,antialias:true,alpha:false}); renderer.setPixelRatio(Math.min(devicePixelRatio,2));
  const controls=new THREE.OrbitControls(camera,canvas); controls.enableDamping=true; controls.dampingFactor=.08; controls.rotateSpeed=.9; controls.enablePan=true;
  const amb=new THREE.AmbientLight(0xffffff,.55); const d1=new THREE.DirectionalLight(0xffffff,.75); d1.position.set(1,2,1); const d2=new THREE.DirectionalLight(0xffffff,.45); d2.position.set(-2,1,-1); scene.add(amb,d1,d2);
  let grid=new THREE.GridHelper(400,20,0x334455,0x223344); grid.visible=false; scene.add(grid);
  const holder=new THREE.Group(); scene.add(holder); let mesh=null;
  const matSolid=new THREE.MeshPhysicalMaterial({color:0xdfe6f3,metalness:.05,roughness:.55,clearcoat:.25,clearcoatRoughness:.7});
  const matWire=new THREE.MeshBasicMaterial({color:0x88aaff,wireframe:true}); let wireOn=false;
  function onResize(){ const w=innerWidth,h=innerHeight; camera.aspect=w/h; camera.updateProjectionMatrix(); renderer.setSize(w,h,false); } addEventListener('resize',onResize,{passive:true}); onResize();
  function frame(obj){ const box=new THREE.Box3().setFromObject(obj); const size=box.getSize(new THREE.Vector3()); const center=box.getCenter(new THREE.Vector3()); const maxDim=Math.max(size.x,size.y,size.z)||100; const dist=maxDim/(2*Math.tan(THREE.MathUtils.degToRad(camera.fov)/2)); camera.position.copy(center.clone().add(new THREE.Vector3(0,0,dist*1.35))); controls.target.copy(center); controls.update(); }
  function centerPivot(obj){ const box=new THREE.Box3().setFromObject(obj); const c=box.getCenter(new THREE.Vector3()); obj.position.sub(c); }
  const loader=new THREE.STLLoader();
  function addGeo(geo,name){ if(!geo||!geo.attributes||!geo.attributes.position){ showToast('STL okunamadÄ±.'); return; } if(mesh){ holder.remove(mesh); mesh.geometry.dispose(); mesh=null; } mesh=new THREE.Mesh(geo,wireOn?matWire:matSolid); holder.add(mesh); centerPivot(holder); frame(holder); showToast('YÃ¼klendi: <b>'+name+'</b>'); }
  fileInput.addEventListener('change',e=>{ const f=e.target.files&&e.target.files[0]; if(!f) return; const r=new FileReader(); r.onload=()=>{ try{ const geo=loader.parse(r.result); addGeo(geo,f.name);}catch(err){console.error(err);showToast('STL parse edilemedi.');} }; r.readAsArrayBuffer(f);});
  addEventListener('dragover',e=>{ e.preventDefault(); drop.style.display='flex'; }); addEventListener('dragleave',e=>{ drop.style.display='none'; });
  addEventListener('drop',e=>{ e.preventDefault(); drop.style.display='none'; const f=e.dataTransfer.files&&e.dataTransfer.files[0]; if(f){ const r=new FileReader(); r.onload=()=>{ try{ const geo=loader.parse(r.result); addGeo(geo,f.name);}catch(err){console.error(err);showToast('STL parse edilemedi.');} }; r.readAsArrayBuffer(f);} });
  document.getElementById('reset').addEventListener('click',()=>{ if(mesh){ centerPivot(holder); frame(holder); controls.reset(); } });
  document.getElementById('wire').addEventListener('click',()=>{ wireOn=!wireOn; if(mesh){ mesh.material=wireOn?matWire:matSolid; } });
  document.getElementById('theme').addEventListener('click',()=>{ dark=!dark; scene.background=new THREE.Color(dark?0x0c0f14:0xf2f5fb); grid.material.color=new THREE.Color(dark?0x334455:0x9db1c9);} );
  document.getElementById('grid').addEventListener('click',()=>{ grid.visible=!grid.visible; });
  (function loop(){ controls.update(); renderer.render(scene,camera); requestAnimationFrame(loop); })();
})();
</script>
</body></html>
