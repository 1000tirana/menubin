<!doctype html>
<html lang="sq">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>QR Liste</title>
  <style>
    :root{--bg:#0f1115;--card:#171a21;--muted:#a9b1c3;--text:#e7ebf5;--accent:#29c06f;--danger:#ff5d5d}
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
    header{position:sticky;top:0;z-index:30;padding:10px 16px;display:flex;justify-content:space-between;align-items:center;background:linear-gradient(180deg,rgba(0,0,0,.65),rgba(0,0,0,0))}
    .flags button{background:none;border:none;font-size:20px;cursor:pointer}
    .pill{padding:4px 10px;border-radius:999px;background:#1f2430;color:var(--muted);font-size:12px}
    .container{padding:12px 16px 120px}
    .camera-card{background:var(--card);border-radius:14px;padding:12px}
    .video-wrap{position:relative;border-radius:12px;overflow:hidden;background:#000;aspect-ratio:3/4}
    video{width:100%;height:100%;object-fit:cover;display:block}
    .scan-frame{position:absolute;inset:10%;border:2px solid rgba(255,255,255,.55);border-radius:12px;pointer-events:none;transition:box-shadow .12s,border-color .12s}
    .glow-green{box-shadow:0 0 0 9999px rgba(0,255,0,.15) inset,0 0 20px #0f0 inset;border-color:#0f0}
    .glow-red{box-shadow:0 0 0 9999px rgba(255,0,0,.15) inset,0 0 20px #f00 inset;border-color:#f00}
    .controls{margin-top:10px;display:flex;flex-wrap:wrap;gap:8px}
    button{border:none;border-radius:10px;padding:10px 14px;font-weight:600;cursor:pointer;background:#222734;color:#e7ebf5}
    .btn-primary{background:var(--accent);color:#06160c}
    .btn-danger{background:var(--danger);color:#260000}
    .btn-warn{background:#ffc53d;color:#221a00}
    .manual{display:flex;gap:8px;margin-top:10px}
    .manual input{flex:1;padding:10px;background:#1b2030;border:1px solid #2a3246;color:#fff;border-radius:8px}
    .list-card{margin-top:16px;background:var(--card);border-radius:14px;padding:8px 0}
    .item{display:flex;gap:12px;align-items:center;padding:12px 14px;border-bottom:1px dashed #23293a}
    .item:last-child{border-bottom:none}
    .index{width:32px;height:32px;border-radius:999px;background:#242a39;display:flex;align-items:center;justify-content:center;font-weight:800;color:#c0c7d9}
    .value{flex:1;font-size:18px;font-weight:800}
    .del{background:#23293a;color:#ff9b9b;border-radius:8px;padding:2px 8px}
    .toolbar{position:fixed;left:0;right:0;bottom:0;z-index:20;display:flex;gap:10px;padding:10px 16px;background:rgba(10,12,16,.9);backdrop-filter:blur(10px)}
    .toolbar .btn{flex:1}
    .last-scan{position:sticky;top:46px;z-index:25;margin:6px 12px;padding:8px 12px;border-radius:10px;display:none;align-items:center;gap:8px;background:#122019;color:#bff4d1;border:1px solid #1b3a2b;border-left:4px solid var(--accent)}
    .last-scan.duplicate{background:#2b1515;color:#f8c6c6;border-color:#ff8b8b}
  </style>
</head>
<body>
  <header>
    <div><strong id="t-title">Lista QR</strong> <span id="camStatus" class="pill">Kamera: Mbyllur</span></div>
    <div class="flags">
      <button type="button" data-lang="sq">ðŸ‡¦ðŸ‡±</button>
      <button type="button" data-lang="en">ðŸ‡¬ðŸ‡§</button>
      <button type="button" data-lang="tr">ðŸ‡¹ðŸ‡·</button>
    </div>
  </header>

  <div id="lastBanner" class="last-scan"><strong id="t-last">I fundit:</strong> <span id="lastValue">â€”</span></div>

  <div class="container">
    <div class="camera-card">
      <div class="video-wrap">
        <video id="video" playsinline muted></video>
        <div id="scanFrame" class="scan-frame"></div>
      </div>
      <div class="controls">
        <button id="startBtn" class="btn-primary">Start</button>
        <button id="stopBtn">Stop</button>
        <button id="switchBtn">Kamera DeÄŸiÅŸtir</button>
        <button id="torchBtn">FlaÅŸ</button>
        <button id="resetBtn" class="btn-danger">Pastro</button>
      </div>
      <div class="manual">
        <input id="manualInput" type="text" maxlength="64" placeholder="Shkruaj kodin...">
        <button id="manualAddBtn" class="btn-warn">Shto</button>
      </div>
    </div>

    <div class="list-card">
      <ul id="list"></ul>
    </div>
  </div>

  <div class="toolbar">
    <button id="copyBtn" class="btn">Kopjo</button>
    <button id="waBtn" class="btn">WhatsApp</button>
  </div>

  <!-- 1) QR kÃ¼tÃ¼phanesi (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js" defer></script>
  <!-- 2) Uygulama kodu (ayrÄ± dosya) -->
  <script src="app.js" defer></script>
</body>
</html>
